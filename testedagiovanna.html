<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Teste de Nivelamento</title>

<!-- Bibliotecas -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body { font-family: Arial; background:#eef2f5; margin:0; }
header { background:#1f3c88; color:white; padding:20px; text-align:center; }
.container { max-width:900px; margin:auto; padding:20px; }
.section { background:white; padding:20px; margin-bottom:20px; border-radius:8px; }
h2 { color:#1f3c88; }
button { padding:12px 20px; background:#27ae60; color:white; border:none; border-radius:5px; font-size:16px; }
canvas { margin-top:20px; }
</style>
</head>
<body>

<header>
<h1>Teste de Nivelamento</h1>
<p>9¬∫ Ano ‚Äî Ingl√™s e Matem√°tica</p>
</header>

<div class="container">

<div class="section">
<label>Nome da aluna:</label>
<input type="text" id="nome" style="width:100%; padding:8px;">
</div>

<!-- INGL√äS -->
<div class="section">
<h2>üá¨üáß Ingl√™s</h2>
<b>Grammar</b><br>
She ______ to school every day.<br>
<input type="radio" name="g1" value="1"> goes
<input type="radio" name="g1" value="0"> go<br><br>

There ______ many books on the table.<br>
<input type="radio" name="g2" value="1"> are
<input type="radio" name="g2" value="0"> is<br><br>

<b>Vocabulary</b><br>
Beautiful means:<br>
<input type="radio" name="v1" value="1"> bonito
<input type="radio" name="v1" value="0"> r√°pido<br><br>

Quickly is a:<br>
<input type="radio" name="v2" value="1"> adverb
<input type="radio" name="v2" value="0"> noun<br><br>

<b>Reading</b><br>
"John plays soccer after school." When does he play?<br>
<input type="radio" name="r1" value="1"> After school
<input type="radio" name="r1" value="0"> Before school<br><br>
</div>

<!-- MATEM√ÅTICA -->
<div class="section">
<h2>üìê Matem√°tica</h2>
<b>√Ålgebra</b><br>
2x + 6 = 14 ‚Üí x = ?<br>
<input type="radio" name="a1" value="1"> 4
<input type="radio" name="a1" value="0"> 3<br><br>

3x = 21 ‚Üí x = ?<br>
<input type="radio" name="a2" value="1"> 7
<input type="radio" name="a2" value="0"> 6<br><br>

<b>Aritm√©tica</b><br>
30% de 200 = ?<br>
<input type="radio" name="ar1" value="1"> 60
<input type="radio" name="ar1" value="0"> 30<br><br>

‚àö81 = ?<br>
<input type="radio" name="ar2" value="1"> 9
<input type="radio" name="ar2" value="0"> 8<br><br>

<b>Geometria</b><br>
√Årea de um quadrado de lado 5 cm:<br>
<input type="radio" name="geo1" value="1"> 25
<input type="radio" name="geo1" value="0"> 20<br><br>

Soma dos √¢ngulos internos do tri√¢ngulo:<br>
<input type="radio" name="geo2" value="1"> 180¬∞
<input type="radio" name="geo2" value="0"> 360¬∞<br><br>
</div>

<button onclick="corrigir()">Finalizar e Gerar PDF</button>

<div id="resultado" class="section" style="display:none;"></div>
<canvas id="grafico" width="400" height="200" style="display:none;"></canvas>

</div>

<script>
function soma(name){
    let el = document.querySelector(`input[name="${name}"]:checked`);
    return el ? parseInt(el.value) : 0;
}

function nivel(p){
    if(p==0) return "Inicial";
    if(p==1) return "B√°sico";
    return "Adequado";
}

function corrigir(){
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    let nome = document.getElementById("nome").value || "Aluna";
    let data = new Date().toLocaleDateString();

    let grammar = soma("g1")+soma("g2");
    let vocab = soma("v1")+soma("v2");
    let reading = soma("r1");

    let algebra = soma("a1")+soma("a2");
    let arit = soma("ar1")+soma("ar2");
    let geo = soma("geo1")+soma("geo2");

    // Mostrar resultado na tela
    document.getElementById("resultado").innerHTML = `
        <h2>Resultado</h2>
        Grammar: ${nivel(grammar)}<br>
        Vocabulary: ${nivel(vocab)}<br>
        Reading: ${nivel(reading)}<br>
        √Ålgebra: ${nivel(algebra)}<br>
        Aritm√©tica: ${nivel(arit)}<br>
        Geometria: ${nivel(geo)}
    `;
    document.getElementById("resultado").style.display="block";

    // Criar gr√°fico
    let ctx = document.getElementById('grafico').getContext('2d');
    document.getElementById('grafico').style.display="block";

    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Grammar','Vocabulary','Reading','√Ålgebra','Aritm√©tica','Geometria'],
            datasets: [{
                label: 'Pontua√ß√£o',
                data: [grammar, vocab, reading, algebra, arit, geo],
                backgroundColor: '#3498db'
            }]
        },
        options: { scales: { y: { beginAtZero:true, max:2 } } }
    });

    setTimeout(() => {
        let imgData = document.getElementById('grafico').toDataURL("image/png");

        // PDF TEXTO
        doc.text("Relat√≥rio de Nivelamento Escolar", 20, 20);
        doc.text("Nome: "+nome, 20, 30);
        doc.text("Data: "+data, 20, 40);

        // Inserir gr√°fico
        doc.addImage(imgData, 'PNG', 15, 50, 180, 90);
        doc.save("resultado_nivelamento.pdf");
    }, 800);
}
</script>

</body>
</html>
